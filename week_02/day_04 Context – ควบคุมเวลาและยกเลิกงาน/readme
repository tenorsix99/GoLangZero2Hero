; üéØ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
; ‡πÉ‡∏ä‡πâ context.Background() ‡πÅ‡∏•‡∏∞ context.WithTimeout
; ‡∏™‡πà‡∏á context ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Goroutine
; ‡πÉ‡∏ä‡πâ context ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô (cancel)
; ‡πÉ‡∏ä‡πâ context ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (timeout / deadline)


; ‚úÖ Part 1: ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Context
; üîπ context ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

; Go ‡πÉ‡∏ä‡πâ context ‡πÄ‡∏û‡∏∑‡πà‡∏≠:
; ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° timeout / deadline
; ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Goroutine ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß
; ‡∏™‡πà‡∏á metadata (‡πÄ‡∏ä‡πà‡∏ô request ID) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á services ‡∏≠‡∏∑‡πà‡∏ô


; ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
; ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)
; defer cancel()

; select {
; case <-time.After(3 * time.Second):
; 	fmt.Println("‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à")
; case <-ctx.Done():
; 	fmt.Println("‚è∞ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å: ", ctx.Err())
; }

; ‚ú® Output:
; ‚è∞ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å: context deadline exceeded


; ‚úÖ Part 2: ‡πÉ‡∏ä‡πâ context ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Goroutine
; func worker(ctx context.Context) {
; 	for {
; 		select {
; 		case <-ctx.Done():
; 			fmt.Println("üõë ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô: ", ctx.Err())
; 			return
; 		default:
; 			fmt.Println("üîÅ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...")
; 			time.Sleep(500 * time.Millisecond)
; 		}
; 	}
; }

; func main() {
; 	ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)
; 	defer cancel()

; 	go worker(ctx)

; 	time.Sleep(3 * time.Second)
; 	fmt.Println("üì¶ ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß")
; }



; üéØ ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Context ‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢
; ‚ùì context ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
; context ‡πÉ‡∏ô Go ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏™‡πà‡∏á "‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°" ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Goroutine ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÄ‡∏ä‡πà‡∏ô:

; ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (cancel)
; ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (timeout)
; ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô request id)

; üí° ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö context ‡∏Å‡∏±‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á:
; ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÅ‡∏°‡πà‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á 5 ‡∏≠‡∏¢‡πà‡∏≤‡∏á
; ‡πÅ‡∏ï‡πà‡πÅ‡∏°‡πà‡πÇ‡∏ó‡∏£‡∏°‡∏≤‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏≤‡∏á ‚Üí ‡∏ô‡∏µ‡πà‡πÅ‡∏´‡∏•‡∏∞‡∏Ñ‡∏∑‡∏≠ "context cancel"


; ‚úÖ context ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?
; | ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£                     | ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ                          |
; | --------------------------   | -------------------------------    |
; | ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Goroutine              | ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô              |
; | ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (timeout)           | ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏á‡∏≤‡∏ô‡πÅ‡∏Æ‡∏á‡∏Å‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡πâ‡∏≤                  |
; | ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì cancel ‡πÅ‡∏ö‡∏ö chain     | ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏ö‡∏ö downstream ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ï‡∏≤‡∏°       |
; | ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (value)             | ‡πÄ‡∏ä‡πà‡∏ô trace id, request id           |

; üîß Syntax ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
; ctx := context.Background()

; - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô context ‡∏´‡∏•‡∏±‡∏Å (‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á)
; ctx, cancel := context.WithCancel(ctx)
; defer cancel()

; - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å context ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢ cancel()
; ctx, cancel := context.WithTimeout(ctx, 2*time.Second)
; defer cancel()
; context ‡∏à‡∏∞‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏´‡∏•‡∏±‡∏á 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (timeout)

; üîÑ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ context ‡∏ñ‡∏π‡∏Å cancel ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
; select {
; case <-ctx.Done():
; 	fmt.Println("‚õî context ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å:", ctx.Err())
; }



